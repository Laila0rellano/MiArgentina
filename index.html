<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNI Digital - Mi Argentina</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #F5F5F5;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        .header {
            background-color: #3B32AD;
            color: white;
            padding: 15px;
            display: flex;
            align-items: center;
            font-size: 18px;
            font-weight: bold;
        }
        .header i { margin-right: 15px; }

        .main-content {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
            padding-bottom: 100px; /* Evita que el menú tape el contenido */
        }

        .card {
            background: white;
            border-radius: 5px; /* Bordes de 5px solicitados */
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            padding: 16px;
        }

        .user-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
        }

        /* --- GIRO REAL 180° --- */
        .dni-container {
            width: 100%;
            perspective: 1000px;
            margin-bottom: 10px;
        }

        .dni-inner {
            position: relative;
            width: 100%;
            height: 215px;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
        }

        .dni-inner.flipped { transform: rotateY(180deg); }

        .dni-front, .dni-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 5px; /* Bordes de 5px */
            box-shadow: 0 8px 25px rgba(0,0,0,0.18);
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .dni-back { transform: rotateY(180deg); }

        /* Corregido: Centrado y sin cortes */
        .dni-img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain; /* Ajusta la imagen sin cortarla */
            border-radius: 5px;
        }

        .dots {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
        }

        .dot { height: 8px; width: 8px; background: #BBB; border-radius: 50%; transition: 0.3s; }
        .dot.active { background: #3B32AD; }

        .update-text {
            text-align: center;
            font-size: 11px;
            color: #777;
            margin-bottom: 20px;
        }

        .actions {
            display: flex;
            border-top: 1px solid #EEE;
            border-bottom: 1px solid #EEE;
        }

        .action-btn {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
            color: #3B32AD;
        }

        /* Botón Desactivar: Texto Gris, X Violeta */
        .btn-desactivar { color: #888 !important; }
        .btn-desactivar i { color: #3B32AD !important; }

        .qr-section {
            padding: 15px 5px;
            color: #333;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
        }

        /* --- MENU INFERIOR FIJO --- */
        .bottom-nav-img {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            display: block;
        }
    </style>
</head>
<body>

    <div class="header">
        <i class="fas fa-arrow-left"></i> DNI Digital
    </div>

    <div class="main-content">
        <div class="card">
            <div class="user-name">Jazmín Carolina Azcurra</div>
            
            <div class="dni-container" id="swipeArea">
                <div class="dni-inner" id="dniFlip">
                    <div class="dni-front">
                        <img src="dni_frente.jpg" class="dni-img">
                    </div>
                    <div class="dni-back">
                        <img src="dni_dorso.jpg" class="dni-img">
                    </div>
                </div>
            </div>

            <div class="dots">
                <div class="dot active" id="dot0"></div>
                <div class="dot" id="dot1"></div>
            </div>

            <div class="update-text" id="reloj">Actualizando...</div>

            <div class="actions">
                <button class="action-btn" onclick="window.location.href='detalle.html'">
                    <i class="far fa-eye"></i> Ver detalle
                </button>
                <div style="width: 1px; background: #EEE;"></div>
                <button class="action-btn btn-desactivar">
                    <i class="fas fa-times"></i> Desactivar DNI
                </button>
            </div>

            <div class="qr-section" onclick="toggleQr()">
                <span><i class="fas fa-qrcode" style="color: #3B32AD; margin-right: 10px;"></i> Verifica código QR</span>
                <i class="fas fa-chevron-down" id="qrArrow" style="color: #CCC; transition: 0.3s;"></i>
            </div>

            <div id="qrContainer" style="display: none; text-align: center; padding: 15px; border-top: 1px solid #EEE;">
                <img src="qr2.jpeg" alt="QR" style="width: 160px; height: 160px; margin: 0 auto; border-radius: 5px;">
            </div>
        </div>
    </div>

    <img src="menu_inferior.jpeg" class="bottom-nav-img" alt="Navegación">

    <script>
        // --- RELOJ EN TIEMPO REAL ---
        function actualizarHora() {
            const ahora = new Date();
            const dia = String(ahora.getDate()).padStart(2, '0');
            const mes = String(ahora.getMonth() + 1).padStart(2, '0');
            const anio = ahora.getFullYear();
            const horas = String(ahora.getHours()).padStart(2, '0');
            const minutos = String(ahora.getMinutes()).padStart(2, '0');
            const segundos = String(ahora.getSeconds()).padStart(2, '0');
            document.getElementById('reloj').innerText = `Última actualización ${dia}/${mes}/${anio} ${horas}:${minutos}:${segundos} hs`;
        }
        setInterval(actualizarHora, 1000);
        actualizarHora();

        // --- LÓGICA DE GIRO ---
        const card = document.getElementById('dniFlip');
        const dots = [document.getElementById('dot0'), document.getElementById('dot1')];
        let flipped = false;

        function toggleFlip() {
            flipped = !flipped;
            card.classList.toggle('flipped', flipped);
            dots[0].classList.toggle('active', !flipped);
            dots[1].classList.toggle('active', flipped);
        }

        const swipeArea = document.getElementById('swipeArea');
        let startX = 0;
        swipeArea.addEventListener('touchstart', e => startX = e.touches[0].clientX);
        swipeArea.addEventListener('touchend', e => {
            if (Math.abs(startX - e.changedTouches[0].clientX) > 50) toggleFlip();
        });
        swipeArea.addEventListener('click', toggleFlip);

        // --- DESPLEGABLE QR ---
        function toggleQr() {
            const qrContainer = document.getElementById('qrContainer');
            const arrow = document.getElementById('qrArrow');
            const isHidden = qrContainer.style.display === "none";
            qrContainer.style.display = isHidden ? "block" : "none";
            arrow.style.transform = isHidden ? "rotate(180deg)" : "rotate(0deg)";
        }
    </script>
</body>

</html>
